<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'/>
  <title>Substance Document</title>

  <link rel='stylesheet' href='console.css'/>
  <script src="lib/underscore.js"></script>
  <script src="lib/jquery.min.js"></script>
  <script src="lib/backbone.js"></script>
  <script src="lib/operation.js"></script>
  <script src="document.js"></script>
  <script src="console.js"></script>

  <!-- Startpage -->
  <script type="text/html" name="start">
    <div id="help">
      <img src="images/introduction.png"/>
    </div>
  </script>

  <script type="text/html" name="application">
    <div class="testsuites">
      Document: 
      <select id="file" name="file">
        <option value="hello.json">Hello World</option>
        <option value="empty.json">Empty</option>
        <option value="substance.json">Substance</option>
      </select>
    </div>
		<div id="document"></div>
  </script>

  <script type="text/html" name="document">

		<div class="operations">
			<% applied = true %>
      <% var width = parseInt((800 / operations.length) - 1, 10); %>
      <% width = Math.min(width, 40); %>
			<% _.each(operations, function(op) { %>
				<a style="width: <%= width %>px;" href="#" class="operation<%= applied ? ' applied' : '' %>" data-sha="<%= op.sha %>"></a>
				<% if (op.sha === sha) applied = false; %>
			<% }); %>
		</div>

    <div class="console-wrapper">
      <div class="console">
        <div class="scope" id="scope">

        </div>
        <div class="action">
          <textarea id="command" class="command inactive"></textarea>
          <div class="apply-operation">Apply</div>
        </div>
      </div>

      <div class="output visualization">
        <div class="select-output">
          <a href="#" class="toggle-output active" data-output="visualization">Visualization</a>
          <a href="#" class="toggle-output" data-output="content">Content</a>
          <a href="#" class="toggle-output last" data-output="operations">Operations</a>
        </div>

        <div class="document">
          <% _.each(nodes, function(node) { %>
            <div class="node <%= node.type %>" data-id="<%= node.id %>">
              <%= node.content %>
              <% annotations = document.getAnnotations(node.id); %>
              <% _.each(annotations, function(a) { %>
                <div class="annotation" data-id="<%= a.id %>"></div>
              <% }); %>
            </div>
          <% }); %>
        </div>
      </div>
    </div>
  </script>

  <script type="text/html" name="scope">
    Operation:
    <select name="scope" id="select_scope">
      <option value="document"<%= scope === "document" ? " selected" : "" %>>Document</option>
      <option value="annotation"<%= scope === "annotation" ? " selected" : "" %>>Annotation</option>
      <option value="comment"<%= scope === "comment" ? " selected" : "" %>>Comment</option>
    </select>
    <select name="examples" id="select_example">
      <option value="">Choose Example</option>
      <% _.each(commands[scope], function(c, index) { %>
        <option value="<%= index %>"><%= c.name %></option>
      <% }); %>
    </select>
  </script>

</head>
<body>
	<div id="container">
	</div>
</body>
</html>